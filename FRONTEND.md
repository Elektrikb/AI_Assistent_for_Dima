# Документация: Фронтенд системы рекомендаций

## 1. Архитектура и структура проекта
Фронтенд построен по модельному представлению (MV-* без строгой привязки к фреймворку):

- Модульный подход: логика разделена на функции (sendMessage, loginUser, logoutUser и др.)
- Клиент-серверное взаимодействие: все данные получает от FastAPI
- Состояние на клиенте: управление сессией, токеном и интерфейсом через localStorage и переменные JS
- Без использования фреймворков: только нативный JS
## 2. Установка и запуск проекта
Предварительные требования
- Веб-браузер (Chrome, Firefox, Edge и др.)
- Запущенный бэкенд на localhost:8000
Шаги запуска
 1. Убедись, что бэкенд запущен:
```
python main.py
```
 2. Открой в браузере:
```
http://localhost:8000/chat
```
 3. Интерфейс загрузится автоматически.
⚠️ Фронтенд обслуживается через FastAPI (app.mount), ничего устанавливать не нужно.

## 3. Компоненты и модули
```
| Компонент             | Назначение                                    |
| Форма входа           | Авторизация пользователя через логин и пароль | 
| Чат-интерфейс         | Отображение диалога пользователь ↔ бот        | 
| Поле ввода            | Ввод вопроса                                  | 
| Кнопка «Отправить»    | Отправка запроса на /ask                      | 
| Кнопка «Выйти»        | Очистка сессии и перезагрузка страницы        | 
```
Ключевые функции  
- sendMessage() — отправка вопроса, обработка ответа
- loginUser() — вход, получение JWT
- logoutUser() — выход, очистка localStorage
- addMessage() — добавление сообщения в чат

## 4. Сторонние библиотеки и фреймворки
Используемые библиотеки приведены в файле rquirements.txt:
```
fastapi
uvicorn
python-jose[cryptography]
passlib[argon2]
python-multipart
sentence-transformers
torch
numpy
pandas
openpyxl
requests
beautifulsoup4
pydantic
```

## 5. Работа с API
Основные эндпоинты
```
| Эндпоинт      | Метод | Назначение                                         |
| /login        | POST  | Аутентификация, получение JWT                      | 
| /register     | POST  | Регистрация нового пользователя                    | 
| /ask          | POST  | Отправка вопроса, получение рекомендации           | 
| /users        | GET   | Получение списка пользователей (только для админа) | 
| /session/{id} | GET   | Получение статистики сессии (в будущем)            |
```

## 6. Структура файлов и директорий
```
RL-Recommendation-System/
├── agents/                            # DQN-агент (выбор действий)
├── api/                               # FastAPI приложение
├── auth/                              # Аутентификация
├── config/                            # Конфигурация
├── data/                              # Данные
├── database/                          # Работа с данными
├── frontend/                          # Фронтенд
├── models/                            # ML-модели
├── rl_environment/                    # Среда RL: состояние, награда
├── training/                          # Обучение
├── main.py                            # Точка входа, инициализация компонентов
├── requirements.txt                   # Зависимости
├── README.md                          # Основное описание проекта
├── FRONTEND.md                        # Документация фронтенда
├── security.py                        # JWT: создание и проверка токенов
└── test_system.py                     # Тесты системы
```
## 7. Обработка ошибок и устранение проблем
Типичные ошибки
```
| Ошибка                    | Причина                     | Решение                          | 
| 401 Unauthorized          | Нет токена или он просрочен | Выйти и войти снова              | 
| 500 Internal Server Error | Ошибка на бэкенде           | Проверить логи бэкенда           | 
| Форма входа не появляется | localStorage содержит токен | Очистить localStorage в DevTools |
```
## 8. Тестирование
Запуск тестов:
```
python test_system.py
```

## 9. Логирование и мониторинг
На стороне фронтенда логирование минимальное  
Используется console.log() для отладки  
Ошибки отправляются в консоль браузера

## 10. Дополнительные ресурсы и ссылки
[FastAPI Documentation](https://fastapi-tutorial.readthedocs.io/en/latest/)  
[MDN Web Docs (HTML/CSS/JS)](https://developer.mozilla.org/ru/)  
[JWT Introduction](https://www.jwt.io/introduction#what-is-json-web-token)  
[Argon2 for Password Hashing](https://argon2-cffi.readthedocs.io/en/stable/howto.html)

## 11. Версионирование и изменения

Используется Git для контроля версий.  
Рекомендуется вести CHANGELOG.md.

## 12. Расширяемость и дальнейшее развитие
Потенциальные улучшения  
✅ Поддержка темы (светлая/тёмная) — через localStorage  
✅ История чата — сохранение в localStorage или сервер  
✅ Админ-панель — просмотр пользователей, статей  
✅ Голосовой ввод — Web Speech API  
✅ WebSocket — для асинхронных уведомлений  
✅ PWA — чтобы работало как приложение  
Интеграция с другими проектами  
Общая база данных (SQLite/PostgreSQL)  
Общая авторизация  
Обмен статьями и вопросами










